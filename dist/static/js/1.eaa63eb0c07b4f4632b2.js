webpackJsonp([1,2],{"+bOj":function(e,t){},"0JTA":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("bIm5"),i=function(e){var t=new Date;return function(e,t){var n=e.split("-")[0],a=e.split("-")[1],i=e.split("-")[2],r=""===t?new Date:new Date(t),s=r.getFullYear(),l=r.getMonth()+1,m=r.getDate(),d=s-n,c=l-a,f=m-i,u="";return d<0?"生日不可小于当前时间":0===d?c<0?"生日不可小于当前时间":c>0?f>=0?c+"个月"+(f>0?f+"天":""):(c-1==0?"":c-1+"个月")+(m+(o(e)-i))+"天":f<0?"生日不可小于当前时间":f+"天":(u=d+"岁",0===c?f>=0?u+(0===f?"":f+"天"):(d-1==0?"":d-1+"岁")+"11个月":c>0?u+=f>=0?c+"个月":c-1>0?c+"个月":o(e)-i+m+"天":(d-1==0?"":d-1+"岁")+(12-a+l)+"个月")}(e,t.getFullYear()+"-"+t.getMonth()+"-"+t.getDay())},o=function(e){var t=new Date(e);return t.setMonth(t.getMonth()+1),t.setDate("1"),t.setDate(t.getDate()-1),t.getDate()},r={data:function(){return{memberInfo:{id:"?",name:"?",fatherId:"?",information:"?",spouseId:"?",fatherName:"?",motherName:"?",birthday:"?",deathId:"?",age:"?"},spinShow:!1}},props:{mid:{type:Number,default:0}},methods:{getInformationById:function(e){var t=this;this.spinShow=!0,Object(a.c)(e).then(function(e){t.memberInfo=e.data,t.memberInfo.age=i(e.data.birthday),t.spinShow=!1}).catch(function(e){if(404==e.response.status)return t.$Notice.warning({title:"网络异常",desc:"未找到该成员信息!"}),void t.closeModal();t.$Notice.warning({title:"网络异常",desc:"未知原因未能获取到相关成员信息!"}),console.log(e)})},resetInformation:function(){this.memberInfo={id:"?",name:"?",fatherId:"?",information:"?",spouseId:"?",fatherName:"?",motherName:"?",birthday:"?",deathId:"?",age:"?"}},closeModal:function(){this.$emit("closeModal")},init:function(){}},mounted:function(){this.init()},watch:{mid:function(e,t){this.resetInformation(),this.getInformationById(e)}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Card",{staticStyle:{width:"350px"}},[e.spinShow?n("Spin",{attrs:{size:"large",fix:""}}):e._e(),e._v(" "),n("Form",[n("FormItem",{attrs:{label:"名字"}},[e._v(e._s(e.memberInfo.name))]),e._v(" "),n("FormItem",{attrs:{label:"年龄"}},[e._v(e._s(e.memberInfo.age))]),e._v(" "),n("FormItem",{attrs:{label:"生日"}},[e._v(e._s(e.memberInfo.birthday))]),e._v(" "),n("FormItem",{attrs:{label:"信息"}},[e._v(e._s(e.memberInfo.information))])],1)],1)],1)},staticRenderFns:[]};var l=n("C7Lr")(r,s,!1,function(e){n("+bOj")},null,null);t.default=l.exports},UdUe:function(e,t){},jKKy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("bIm5"),i={data:function(){return{showMemberDetail:!1,spinShow:!1,genealogyData:{},treeData:[],midOfDisplay:0}},components:{MemberDetail:n("0JTA").default},methods:{getCompleteGenealogy:function(e){var t=this;this.spinShow=!0,Object(a.a)(e).then(function(e){var n=e.data.payload;t.genealogyData=e.data.payload,t.treeData=[t.format(n)],t.spinShow=!1}).catch(function(e){t.$Message.error(e)})},format:function(e){var t=this,n={};return n.title=e.name,n.children=[],n.expand=!0,n.mid=e.id,e.childrenList.length>0&&e.childrenList.forEach(function(e){n.children.push(t.format(e))}),n},displayMemberDetail:function(e,t){this.showMemberDetail=!0,this.midOfDisplay=t.mid},closeModal:function(){this.showMemberDetail=!1}},mounted:function(){var e=this.$route.params.gid;this.getCompleteGenealogy(e)}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.spinShow?n("Spin",{attrs:{size:"large",fix:""}}):e._e(),e._v(" "),n("Tree",{attrs:{data:e.treeData},on:{"on-select-change":e.displayMemberDetail}}),e._v(" "),n("Modal",{attrs:{title:"成员详情"},model:{value:e.showMemberDetail,callback:function(t){e.showMemberDetail=t},expression:"showMemberDetail"}},[n("MemberDetail",{attrs:{mid:e.midOfDisplay},on:{closeModal:e.closeModal}})],1)],1)},staticRenderFns:[]};var r=n("C7Lr")(i,o,!1,function(e){n("UdUe")},null,null);t.default=r.exports}});
//# sourceMappingURL=1.eaa63eb0c07b4f4632b2.js.map